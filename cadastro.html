<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
     <title>Cadastro Cliente</title>
     <link rel="stylesheet" type="text/css" href="./css/estilocadastro.css">
     <link rel="shortcut icon" href="./assets/logo.svg" type="image/x-icon">
</head>
<body>
    <div class="container">
        <div class="form-image">
            <img src="./assets/clientes.png">
        </div>
        <div class="form">    
        <form name="Cadastro">
            <div class="form-header">
                <div class="title">
                    <h1>Seus Dados</h1>
                </div>
            </div>
            <p class="txt__inf">Informe os seus dados para que possamos entrar em contato!</p>
            <div class="input-group">
                <div class="input-box">
                    <label for="name">Nome:</label>
                    <input id="name" type="text" name="txtNome" size="70" placeholder="Digite seu nome completo" required>
                </div>

                <div class="input-box">
                    <label for="telefone">Telefone:</label>
                    <input id="telefone" type="tel" name="txtTelefone" placeholder="(xx) xxxxx-xxxx" required>  
                </div>

                <div class="input-box">
                    <label for="idade">Idade:</label>
                    <input id="idade" type="number" name="intIdade" placeholder="Digite sua idade" required>
                </div>

                <div class="input-box">
                    <label for="name">Email:</label>
                    <input id="name" type="email" name="txtEmail" placeholder="Digite seu email" required>
                </div>

               <div class="continue-button">
                    <input type="button" name="btSalvar" value="Enviar" onclick="salvar(event, this)">
               </div>     
           
        </div>
    </div>

        </div>
    </div>            
    </form>

    <script type = "text/JavaScript">
        function salvar(event, form) {
            event.preventDefault(); 

            const nome_cliente = document.Cadastro.txtNome.value;
            const email_cliente = document.Cadastro.txtEmail.value;
            const telefone_cliente = document.Cadastro.txtTelefone.value;
            const idade_cliente = document.Cadastro.intIdade.value;
            
            const dados = {
                nome: nome_cliente,
                email: email_cliente,
                telefone: telefone_cliente,
                idade: idade_cliente
            };
            
            const options = {
                method: 'POST', 
                header: {'Content-Type':'application/json',},
                
                body: JSON.stringify(dados),
            };
            if (nome_cliente != ""){
                const URL = 'http://localhost/api_Projeto/api/pessoa/';
                fetch(URL, options)
                    .then(resp => resp.json())
                    .then(data => mostrarResposta(data))
                    .catch(erro => console.log(erro));
            }            
        }
       
        function mostrarResposta(data) {
            console.log(data); 
            if (data.status == "sucess"){
                alert("Dados inseridos com sucesso!");                        
            }else{
                alert("Erro ao inserir os dados!");
            }            
        }
    </script>    
</body>
</html>
